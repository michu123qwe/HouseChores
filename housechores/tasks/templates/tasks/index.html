
{% if user.is_authenticated %}
    Welcome {{ user.username }}<br>
    <a href="{% url 'accounts:logout' %} ">Logout</a><br>
    <a href="{% url 'tasks:create_task' %}">Create Task</a><br><br>
    <center>
    {% if task_list %}
        {% for task in task_list %}
            {% if not task.is_expired and not task.task_done_by %}
                    Task: {{ task.caption }}<br>
                    Given by: {{ task.task_giver }}<br>
                    Added: {{ task.pub_date }}<br>
                    Due to: {{ task.due_date }}<br>
                    Status: To be done
                    <form action="{% url 'tasks:complete_task' task.id %}" method="post">
                        {% csrf_token %}
                         <button type="submit" value="{{ task.id }}">Done</button>
                    </form>
                    {% if user.username == task.task_giver or user.is_superuser %}
                        <form action="{% url 'tasks:delete_task' task.id %}" method="post">
                            {% csrf_token %}
                             <button type="submit" value="{{ task.id }}">Delete</button>
                        </form>
                    {% endif %}<br><br><br>
            {% endif %}
        {% endfor %}

        {% for task in task_list %}
            {% if task.is_expired or task.task_done_by %}
                Task: {{ task.caption }}<br>
                Given by: {{ task.task_giver }}<br>
                Added: {{ task.pub_date }}<br>
                Due to: {{ task.due_date }}<br>
                Status:
                {% if task.is_expired %}
                    Expired
                {% elif task.task_done_by%}
                    Done by {{ task.task_done_by }}<br>
                    {{ task.task_done_date }}
                {% endif %}<br>
                {% if user.username == task.task_giver or user.is_superuser %}
                    <form action="{% url 'tasks:delete_task' task.id %}" method="post">
                        {% csrf_token %}
                         <button type="submit" value="{{ task.id }}">Delete</button>
                    </form>
                {% endif %}
                <br><br><br>
            {% endif %}
        {% endfor %}
    {% else %}
        No tasks are available.
    {% endif %}
    </center>
{% else %}
    You need to be logged in.<br><br>
    <a href="{% url 'accounts:login' %}">Log In</a><br>
    Do not have an account? <a href="{% url 'accounts:signup' %}">Register</a>
{% endif %}